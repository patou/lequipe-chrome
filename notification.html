<!doctype html>
<html>
<head>
<title>Nagios 2.0 Notification</title>
<script type="text/javascript" src="jquery-1.4.2.js"></script>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<style type="text/css">
a {
	text-decoration: none
}

a:hover {
	text-decoration: underline
}

body {
	color: black;
	font-family: Garamond, "Times New Roman", serif
}

h1 {
	font-family: Garamond, "Times New Roman", serif;
	text-align: center;
	text-transform: capitalize
}

h2 {
	font-style: italic
}

ul {
	list-style-type: circle
}

/* b { font-family: Arial, sans-serif; font-size: .9em }
span.nagios { font-family: Arial, sans-serif; font-size: .9em } */
b {
	font-size: .9em
}

span.nagios {
	font-size: .9em
}

span.lower {
	text-transform: lowercase
}

.footer {
	font-family: Arial, sans-serif;
	font-style: italic;
	font-size: .7em;
	text-align: right
}
</style>
<script type="text/javascript">

var listItems; 
var currentTabId = 0;

function afficheInfo(type)
{
	db = openDatabase("Equipe.fr", "1.0", "Items database", 200000);
            
            				function onError(tx, error) {
            				  console.log(error.message);
            				}
            				
            				// Selection des Items :
            				db.transaction(function(tx) {
            				    tx.executeSql("SELECT * FROM Items WHERE read = ? AND type = ?", [false, type], function(tx, result) {
								
								listItems = result.rows;
            				     /* for (var i = 0, item = null; i < result.rows.length; i++) {
            				        item = result.rows.item(i);
									console.log(item['title']);
									
            				        
								  afficheItem(0);
            				      }*/
            				    });
							});
}

function afficheItem(item)
{
	html = '<a href="'+item['url']+'" target="_blank"><b>'+item['type']+' :</b> '+item['title']+' </a>';
									html += '<p>' + item['text'] + '</p>';
									html += ' <div style="clear:both; height:1px; overflow:hidden; border-top:1px dotted #CCC; margin:2px 4px 2px 4px"></div>';
    $('#DIV_CONTENT').html(html);
}

function afficheNext()
{
	currentTabId += 1;
	var item = listItems.item(currentTabId);
	afficheItem(item);
}

function init () {
	console.log(window.location.search);
	var item = eval("a="+decodeURIComponent(window.location.search.substring(1)));
	afficheItem(item);
	afficheInfo(item.type);
}
</script>
</head>
<body onload="init();">
<div class='notification' id="DIV_CONTENT">
<div class="content">Nouvelle alerte !</div>
</div>
<a href="javascript:afficheNext();return false;"> Suivant </a>
</body>
</html>